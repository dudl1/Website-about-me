<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#2196f3">
    <title>Party discussion</title>
    <style>
      .app  {
        display: flex;
        justify-content: center;
      }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/5.4.4/photoswipe.min.css">
    <script type="module" crossorigin src="/assets/index-CtsTcKcT.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-Cb68eE8c.css">
  </head>
  <body>
    <div id="app" class="app"></div>
    <script>
        async function samsum_text(event) {
          event.srcElement.children[0].classList.toggle("active");

          if (event.srcElement.children[0].classList.contains("active")) {
            if (event.srcElement.children[0].children[1].innerText === "") {
              const message = event.target.firstChild.textContent;
              const url = "https://8000-dudl1-pythonserver-dnpny13fizz.ws-eu115.gitpod.io/?message=" + encodeURIComponent(message);

              try {
                const response = await fetch(url, {
                  method: 'GET',
                  headers: {
                    'Content-Type': 'application/json'
                  }
                });

                if (!response.ok) {
                  throw new Error("Ошибка HTTP: " + response.status);
                }

                const data = await response.json();
                event.srcElement.children[0].children[0].classList.remove("active");

                event.srcElement.children[0].children[0].innerText = "Сокращенный текст";
                event.srcElement.children[0].children[1].innerText = data.summarization;
              } catch (error) {
                document.getElementById('response').textContent = "Ошибка: " + error.message;
              }
            }
          }
        }
    </script>
  </body>
</html>